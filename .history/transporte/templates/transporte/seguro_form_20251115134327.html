{% extends 'base.html' %}

{% block title %}{% if seguro %}Editar{% else %}Nuevo{% endif %} Seguro - Log√≠stica Global{% endblock %}

{% block content %}
<div class="page-title">
    <span>üõ°Ô∏è</span>
    <span>{% if seguro %}Editar Seguro{% else %}Nuevo Seguro{% endif %}</span>
</div>

<div class="content-card">
    <form method="post">
        {% csrf_token %}
        
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">N√∫mero de P√≥liza *</label>
                <input type="text" class="form-input" name="numero_poliza" value="{{ seguro.numero_poliza|default:'' }}" required>
            </div>
            <div class="form-group">
                <label class="form-label">Tipo de Seguro *</label>
                <select class="form-select" name="tipo_seguro" required>
                    <option value="">Seleccionar tipo</option>
                    <option value="Veh√≠culo" {% if seguro.tipo_seguro == 'Veh√≠culo' %}selected{% endif %}>Veh√≠culo</option>
                    <option value="Aeronave" {% if seguro.tipo_seguro == 'Aeronave' %}selected{% endif %}>Aeronave</option>
                    <option value="Carga" {% if seguro.tipo_seguro == 'Carga' %}selected{% endif %}>Carga</option>
                    <option value="Responsabilidad Civil" {% if seguro.tipo_seguro == 'Responsabilidad Civil' %}selected{% endif %}>Responsabilidad Civil</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">Aseguradora *</label>
            <input type="text" class="form-input" name="aseguradora" value="{{ seguro.aseguradora|default:'' }}" required>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Cobertura ($) *</label>
                <input type="number" class="form-input" name="cobertura" value="{{ seguro.cobertura|default:'' }}" step="0.01" required min="0">
            </div>
            <div class="form-group">
                <label class="form-label">Estado *</label>
                <select class="form-select" name="estado" required>
                    <option value="Vigente" {% if seguro.estado == 'Vigente' %}selected{% endif %}>Vigente</option>
                    <option value="Por Vencer" {% if seguro.estado == 'Por Vencer' %}selected{% endif %}>Por Vencer</option>
                    <option value="Vencido" {% if seguro.estado == 'Vencido' %}selected{% endif %}>Vencido</option>
                    <option value="Cancelado" {% if seguro.estado == 'Cancelado' %}selected{% endif %}>Cancelado</option>
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Vigencia Desde *</label>
                <input type="date" class="form-input" name="vigencia_desde" value="{{ seguro.vigencia_desde|default:'' }}" required>
            </div>
            <div class="form-group">
                <label class="form-label">Vigencia Hasta *</label>
                <input type="date" class="form-input" name="vigencia_hasta" value="{{ seguro.vigencia_hasta|default:'' }}" required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Veh√≠culo Asegurado</label>
                <select class="form-select" name="vehiculo">
                    <option value="">No aplica</option>
                    {% for vehiculo in vehiculos %}
                    <option value="{{ vehiculo.id }}" {% if seguro.vehiculo.id == vehiculo.id %}selected{% endif %}>
                        {{ vehiculo.patente }} - {{ vehiculo.modelo }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Aeronave Asegurada</label>
                <select class="form-select" name="aeronave">
                    <option value="">No aplica</option>
                    {% for aeronave in aeronaves %}
                    <option value="{{ aeronave.id }}" {% if seguro.aeronave.id == aeronave.id %}selected{% endif %}>
                        {{ aeronave.matricula }} - {{ aeronave.modelo }}
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="action-buttons">
            <button type="submit" class="btn btn-success">
                {% if seguro %}Actualizar{% else %}Crear{% endif %} Seguro
            </button>
            <a href="{% url 'seguros' %}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}